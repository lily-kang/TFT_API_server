<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFT Pipeline - Interactive Guide (Passage & Question)</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* ============================================
           CSS Variables & Reset
        ============================================ */
        :root {
            /* Light Mode Colors */
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --text-muted: #adb5bd;

            /* Dark Mode Colors (will be overridden) */
            --bg-dark-primary: #1e1e1e;
            --bg-dark-secondary: #2d2d2d;
            --bg-dark-tertiary: #3d3d3d;
            --text-dark-primary: #e0e0e0;
            --text-dark-secondary: #b0b0b0;

            /* Step Colors */
            --step-initial: #E3F2FD;
            --step-llm: #F3E5F5;
            --step-validation: #E8F5E9;
            --step-revision: #FFF3E0;
            --status-success: #90EE90;
            --status-fail: #FFB6C6;

            /* Accent Colors */
            --primary: #2563eb;
            --hero-primary: #9799ee;
            --primary-hover: #1d4ed8;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;

            /* Question Pipeline Colors */
            --question-primary: #7c3aed;
            --question-hero: #a78bfa;
            --question-light: #f3e8ff;
            --question-dark: #6d28d9;

            /* Layout */
            --sidebar-width: 260px;
            --header-height: 64px;
            --border-radius: 8px;
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        /* ============================================
           Dark Mode
        ============================================ */
        body.dark-mode {
            --bg-primary: var(--bg-dark-primary);
            --bg-secondary: var(--bg-dark-secondary);
            --bg-tertiary: var(--bg-dark-tertiary);
            --text-primary: var(--text-dark-primary);
            --text-secondary: var(--text-dark-secondary);

            --step-initial: #1e3a5f;
            --step-llm: #3d2d4d;
            --step-validation: #2d4d3d;
            --step-revision: #4d3d2d;
            --status-success: #2d5f2d;
            --status-fail: #5f2d2d;
        }

        /* ============================================
           Header
        ============================================ */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            border: 1px solid var(--bg-tertiary);
            border-radius: 20px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.9rem;
            width: 300px;
            transition: all var(--transition-speed);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .dark-mode-toggle {
            background: var(--bg-tertiary);
            border: none;
            border-radius: 20px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: all var(--transition-speed);
        }

        .dark-mode-toggle:hover {
            background: var(--primary);
            color: white;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-primary);
        }

        /* ============================================
           Sidebar
        ============================================ */
        .sidebar {
            position: fixed;
            left: 0;
            top: var(--header-height);
            width: var(--sidebar-width);
            height: calc(100vh - var(--header-height));
            background: var(--bg-secondary);
            border-right: 1px solid var(--bg-tertiary);
            overflow-y: auto;
            padding: 1.5rem 0;
            z-index: 999;
            transition: transform var(--transition-speed);
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .nav-section {
            margin-bottom: 2rem;
        }

        .nav-section-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            padding: 0 1.5rem;
            margin-bottom: 0.75rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            color: var(--text-primary);
            text-decoration: none;
            transition: all var(--transition-speed);
            cursor: pointer;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: var(--bg-tertiary);
            border-left-color: var(--primary);
        }

        .nav-item.active {
            background: var(--bg-tertiary);
            border-left-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }

        .nav-item-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            font-size: 0.85rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        .nav-item.active .nav-item-number {
            background: var(--primary);
            color: white;
        }

        .nav-item-text {
            font-size: 0.9rem;
            flex: 1;
        }

        /* ============================================
           Main Content
        ============================================ */
        .main-content {
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            padding: 2rem;
            min-height: calc(100vh - var(--header-height));
            transition: margin-left var(--transition-speed);
        }

        .main-content.expanded {
            margin-left: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* ============================================
           Hero Section
        ============================================ */
        .hero {
            background: linear-gradient(135deg, var(--hero-primary) 0%, #8d56ed 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: var(--border-radius);
            margin-bottom: 3rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.1rem;
            opacity: 0.95;
            max-width: 800px;
        }

        .hero-stats {
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ============================================
           Section
        ============================================ */
        .section {
            margin-bottom: 4rem;
            scroll-margin-top: calc(var(--header-height) + 2rem);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--bg-tertiary);
        }

        .section-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            font-size: 1.25rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            flex: 1;
        }

        .section-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .badge-generate {
            background: var(--step-initial);
            color: #1e40af;
        }

        .badge-filter {
            background: var(--step-validation);
            color: #065f46;
        }

        .badge-analyze {
            background: var(--step-llm);
            color: #7c2d12;
        }

        .badge-revise {
            background: var(--step-revision);
            color: #92400e;
        }

        .section-content {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: var(--border-radius);
        }

        .subsection {
            margin-bottom: 2rem;
        }

        .subsection:last-child {
            margin-bottom: 0;
        }

        .subsection-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* ============================================
           Info Cards
        ============================================ */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .info-card {
            background: var(--bg-primary);
            border: 1px solid var(--bg-tertiary);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            transition: all var(--transition-speed);
        }

        .info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .info-card-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-card-content {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* ============================================
           Code Block
        ============================================ */
        .code-block {
            background: #282c34;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin: 1rem 0;
        }

        .code-header {
            background: #21252b;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .code-language {
            color: #abb2bf;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .copy-btn {
            background: #3e4451;
            border: none;
            color: #abb2bf;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: #4e5461;
            color: white;
        }

        .code-content {
            padding: 1rem;
            overflow-x: auto;
        }

        pre {
            margin: 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            color: #abb2bf;
        }

        /* ============================================
           Table
        ============================================ */
        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-primary);
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        thead {
            background: var(--bg-tertiary);
        }

        th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 2px solid var(--bg-tertiary);
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--bg-tertiary);
            color: var(--text-secondary);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--bg-secondary);
        }

        /* ============================================
           Alert/Note Box
        ============================================ */
        .alert {
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            margin: 1.5rem 0;
            border-left: 4px solid;
        }

        .alert-info {
            background: #dbeafe;
            border-color: var(--primary);
            color: #1e40af;
        }

        .alert-success {
            background: #d1fae5;
            border-color: var(--success);
            color: #065f46;
        }

        .alert-warning {
            background: #fef3c7;
            border-color: var(--warning);
            color: #92400e;
        }

        .alert-danger {
            background: #fee2e2;
            border-color: var(--danger);
            color: #991b1b;
        }

        body.dark-mode .alert-info {
            background: #1e3a5f;
            color: #93c5fd;
        }

        body.dark-mode .alert-success {
            background: #1e5f3f;
            color: #86efac;
        }

        body.dark-mode .alert-warning {
            background: #5f4f1e;
            color: #fcd34d;
        }

        body.dark-mode .alert-danger {
            background: #5f1e1e;
            color: #fca5a5;
        }

        /* ============================================
           Flowchart Container
        ============================================ */
        .flowchart-container {
            background: var(--bg-secondary);
            border: 2px solid var(--bg-tertiary);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }

        .flowchart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .flowchart-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .flowchart-controls {
            display: flex;
            gap: 0.5rem;
        }

        .flowchart-btn {
            background: var(--bg-tertiary);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            color: var(--text-primary);
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .flowchart-btn:hover {
            background: var(--primary);
            color: white;
        }

        #flowchart {
            width: 100%;
            height: 600px;
            border-radius: var(--border-radius);
            background: var(--bg-primary);
        }

        /* Flowchart styles */
        .node {
            cursor: pointer;
            transition: all 0.3s;
        }

        .node:hover {
            filter: brightness(1.1);
        }

        .node.active {
            filter: brightness(1.2);
            stroke: #2563eb;
            stroke-width: 3px;
        }

        .node-rect {
            rx: 8;
            ry: 8;
        }

        .node-text {
            fill: white;
            font-size: 13px;
            font-weight: 600;
            text-anchor: middle;
            pointer-events: none;
        }

        .node-subtitle {
            fill: white;
            font-size: 10px;
            opacity: 0.9;
            text-anchor: middle;
            pointer-events: none;
        }

        .link {
            fill: none;
            stroke: #94a3b8;
            stroke-width: 2;
            marker-end: url(#arrowhead);
        }

        .link-label {
            font-size: 11px;
            fill: var(--text-secondary);
        }

        /* ============================================
           Footer
        ============================================ */
        .footer {
            background: var(--bg-secondary);
            border-top: 1px solid var(--bg-tertiary);
            padding: 2rem;
            margin-top: 4rem;
            text-align: center;
            color: var(--text-secondary);
        }

        /* ============================================
           Responsive Design
        ============================================ */
        @media (max-width: 1024px) {
            .search-input {
                width: 200px;
            }
        }

        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.show {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .search-input {
                width: 150px;
            }

            .hero h1 {
                font-size: 1.75rem;
            }

            .hero-stats {
                flex-direction: column;
                gap: 1rem;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }

            .section-title {
                font-size: 1.5rem;
            }

            #flowchart {
                height: 400px;
            }
        }

        /* ============================================
           Pipeline Tabs
        ============================================ */
        .pipeline-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--bg-tertiary);
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all var(--transition-speed);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-btn:hover {
            color: var(--text-primary);
            background: var(--bg-secondary);
        }

        .tab-btn.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-btn.active[data-tab="question"] {
            color: var(--question-primary);
            border-bottom-color: var(--question-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Question Pipeline Overrides */
        .question-pipeline .section-number {
            background: var(--question-primary);
        }

        .question-pipeline .badge-generate {
            background: var(--question-light);
            color: var(--question-dark);
        }

        .question-pipeline .badge-analyze {
            background: var(--question-light);
            color: var(--question-dark);
        }

        .question-pipeline .info-card-title {
            color: var(--question-primary);
        }

        /* ============================================
           Utility Classes
        ============================================ */
        .mt-1 {
            margin-top: 0.5rem;
        }

        .mt-2 {
            margin-top: 1rem;
        }

        .mt-3 {
            margin-top: 1.5rem;
        }

        .mt-4 {
            margin-top: 2rem;
        }

        .mb-1 {
            margin-bottom: 0.5rem;
        }

        .mb-2 {
            margin-bottom: 1rem;
        }

        .mb-3 {
            margin-bottom: 1.5rem;
        }

        .mb-4 {
            margin-bottom: 2rem;
        }

        /* ============================================
           Parameter Examples (Input Params Helper)
        ============================================ */
        .param-examples {
            background: var(--bg-primary);
            border: 1px solid var(--bg-tertiary);
            border-radius: var(--border-radius);
            padding: 1rem 1.25rem;
        }

        .param-examples-title {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .param-examples-list {
            padding-left: 1.25rem;
            margin: 0;
        }

        .param-key {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            background: var(--bg-tertiary);
            padding: 0.1rem 0.35rem;
            border-radius: 6px;
            font-size: 0.9em;
        }

        .param-desc {
            color: var(--text-secondary);
        }

        /* ============================================
           Figures / Images
        ============================================ */
        .pipeline-figure {
            margin-top: 1rem;
        }

        .pipeline-figure img {
            display: block;
            width: 100%;
            height: auto;
            border-radius: var(--border-radius);
            border: 1px solid var(--bg-tertiary);
            background: var(--bg-primary);
        }

        .pipeline-figure figcaption {
            margin-top: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* ============================================
           Dataset Summary (Hero ì•„ë˜)
        ============================================ */
        .kpi-number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-primary);
            line-height: 1.1;
        }

        .kpi-label {
            margin-top: 0.35rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .kpi-period {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .clean-list {
            margin: 0.25rem 0 0;
            padding-left: 1.25rem;
        }

        .clean-list li {
            margin: 0.25rem 0;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
            <div class="logo">
                ğŸ“š TFT Pipeline
            </div>
        </div>
        <div class="header-right">
            <div class="search-box">
                <span class="search-icon">ğŸ”</span>
                <input type="text" class="search-input" placeholder="Search..." id="searchInput">
            </div>
            <button class="dark-mode-toggle" onclick="toggleDarkMode()">
                <span id="themeIcon">ğŸŒ™</span>
                <span id="themeText">Dark</span>
            </button>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <nav id="sidebarNav">
            <!-- Passage Pipeline Navigation (default) -->
            <div class="nav-content" data-pipeline="passage">
                <div class="nav-section">
                    <div class="nav-section-title">Overview</div>
                    <a href="#overview" class="nav-item active" onclick="setActive(this)">
                        <span class="nav-item-number">ğŸ“–</span>
                        <span class="nav-item-text">ì‹œìŠ¤í…œ ê°œìš”</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Pipeline Steps</div>
                    <a href="#step-1" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">1</span>
                        <span class="nav-item-text">Passage Generator</span>
                    </a>
                    <a href="#step-2" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">2</span>
                        <span class="nav-item-text">Initial Filter</span>
                    </a>
                    <a href="#step-3" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">3</span>
                        <span class="nav-item-text">Semantic Profile</span>
                    </a>
                    <a href="#step-4" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">4</span>
                        <span class="nav-item-text">Topic Closeness</span>
                    </a>
                    <a href="#step-5" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">5</span>
                        <span class="nav-item-text">Validation Chain</span>
                    </a>
                    <a href="#step-6" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">6</span>
                        <span class="nav-item-text">Text Analyzer</span>
                    </a>
                    <a href="#step-7" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">7</span>
                        <span class="nav-item-text">Syntax Revision</span>
                    </a>
                    <a href="#step-8" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">8</span>
                        <span class="nav-item-text">Lexical Revision</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Resources</div>
                    <a href="#troubleshooting" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">ğŸ”§</span>
                        <span class="nav-item-text">Troubleshooting</span>
                    </a>
                    <a href="#glossary" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">ğŸ“–</span>
                        <span class="nav-item-text">ìš©ì–´ ì„¤ëª…</span>
                    </a>
                </div>
            </div>

            <!-- Question Pipeline Navigation -->
            <div class="nav-content" data-pipeline="question" style="display: none;">
                <div class="nav-section">
                    <div class="nav-section-title">Overview</div>
                    <a href="#overview" class="nav-item active" onclick="setActive(this)">
                        <span class="nav-item-number">ğŸ“–</span>
                        <span class="nav-item-text">ì‹œìŠ¤í…œ ê°œìš”</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Pipeline Steps</div>
                    <a href="#q-step-1" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">1</span>
                        <span class="nav-item-text">Question Generator</span>
                    </a>
                    <a href="#q-step-2" class="nav-item" onclick="setActive(this)">
                        <span class="nav-item-number">2</span>
                        <span class="nav-item-text">Meta Labeling</span>
                    </a>
                    <a href="#q-step-2a" class="nav-item" style="padding-left: 3rem;" onclick="setActive(this)">
                        <span class="nav-item-number">2a</span>
                        <span class="nav-item-text">Stem Analysis</span>
                    </a>
                    <a href="#q-step-2b" class="nav-item" style="padding-left: 3rem;" onclick="setActive(this)">
                        <span class="nav-item-number">2b</span>
                        <span class="nav-item-text">Options Structure</span>
                    </a>
                    <a href="#q-step-2c" class="nav-item" style="padding-left: 3rem;" onclick="setActive(this)">
                        <span class="nav-item-number">2c</span>
                        <span class="nav-item-text">Options Language</span>
                    </a>
                </div>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <div class="container">
            <!-- Hero Section -->
            <section class="hero" id="overview">
                <h1 id="heroTitle">ğŸ¯ TFT Passage Generation Pipeline</h1>
                <p id="heroDescription">êµìœ¡ìš© ì˜ì–´ ì§€ë¬¸ì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³ , í’ˆì§ˆì„ ê²€ì¦í•˜ë©°, í•„ìš”ì‹œ ìë™ìœ¼ë¡œ ìˆ˜ì •í•˜ëŠ” <br>MT Further Practice Pipeline ê°€ì´ë“œì…ë‹ˆë‹¤.</p>

                <div class="hero-stats" id="heroStats">
                    <div class="stat-card">
                        <span class="stat-number">8</span>
                        <span class="stat-label">Processing Steps</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">3</span>
                        <span class="stat-label">Key Metrics</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">4</span>
                        <span class="stat-label">LLM Validations</span>
                    </div>
                </div>
            </section>

            <section class="section">
                <div class="section-header">
                    <div class="section-title">ğŸ“š ë°ì´í„° ë²”ìœ„ & ìƒì„± ê·œëª¨</div>
                </div>
                <div class="section-content">
                    <p class="kpi-period"><strong>ê¸°ê°„:</strong> 9ì›” ~ í˜„ì¬(1ì›”) ê¸°ì¤€</p>

                    <div class="info-grid mt-2">
                        <div class="info-card">
                            <div class="info-card-title">ğŸ“˜ ëŒ€ìƒ êµê³¼ì„œ</div>
                            <div class="info-card-content">
                                <ul class="clean-list">
                                    <li><strong>Journeys 1-2</strong>: Ready to Roll</li>
                                    <li><strong>Wonders 1-2</strong>: Fly High</li>
                                    <li><strong>Wonders 2-2</strong>: Set Sail</li>
                                    <li><strong>Wonders 2-1</strong>: All Aboard</li>
                                    <li><strong>Journeys 2-1</strong>: In the Spotlight</li>
                                    <li><strong>Wonders 3-1</strong>: Into the Horizon</li>
                                    <li><strong>Journeys 2-2</strong>: Take Action</li>
                                    <li><strong>Pathfinders 3-2</strong>: Trailblazer</li>
                                    <li><strong>Pathfinders 3-1</strong>: Pioneer</li>
                                </ul>
                            </div>
                        </div>

                        <div class="info-card">
                            <div class="info-card-title">ğŸ“„ ì´ ì›ë³¸ ì§€ë¬¸</div>
                            <div class="info-card-content">
                                <div class="kpi-number">56</div>
                                <div class="kpi-label">êµê³¼ì„œì—ì„œ ê¸°ì¤€ìœ¼ë¡œ ì‚¼ì€ ì›ë³¸ ì§€ë¬¸</div>
                            </div>
                        </div>

                        <div class="info-card">
                            <div class="info-card-title">âœ… ê²€ì¦ ì§€ë¬¸</div>
                            <div class="info-card-content">
                                <div class="kpi-number">1,549</div>
                                <div class="kpi-label">ìƒì„± í›„ ì •ëŸ‰/ì •ì„± ê²€ì¦ ë‹¨ê³„ì— ë“¤ì–´ê°„ í›„ë³´ ì§€ë¬¸</div>
                            </div>
                        </div>

                        <div class="info-card">
                            <div class="info-card-title">â­ ì‚¬ìš© ì§€ë¬¸</div>
                            <div class="info-card-content">
                                <div class="kpi-number">720</div>
                                <div class="kpi-label">ìµœì¢… í’ˆì§ˆ ê¸°ì¤€ì„ í†µê³¼í•´ ì‹¤ì œ ì‚¬ìš©ëœ ì§€ë¬¸</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pipeline Tabs -->
            <div class="pipeline-tabs">
                <button class="tab-btn active" data-tab="passage" onclick="switchPipeline('passage')">
                    ğŸ“ Passage Pipeline
                </button>
                <button class="tab-btn" data-tab="question" onclick="switchPipeline('question')">
                    â“ Question Pipeline
                </button>
            </div>

            <!-- Passage Pipeline Content -->
            <div id="passage-content" class="tab-content active">
                <!-- Interactive Flowchart -->
                <div class="flowchart-container">
                <div class="flowchart-header">
                    <div class="flowchart-title">ğŸ“Š Flow Chart</div>
                    <div class="flowchart-controls">
                        <button class="flowchart-btn" onclick="resetZoom()">ğŸ” Reset Zoom</button>
                        <button class="flowchart-btn" onclick="centerFlowchart()">ğŸ¯ Center</button>
                    </div>
                </div>
                <svg id="flowchart"></svg>
            </div>

            <!-- Core Metrics Overview -->
            <section class="section">
                <div class="section-header">
                    <div class="section-title">í•µì‹¬ ì§€í‘œ (Core Metrics)</div>
                </div>
                <div class="section-content">
                    <div class="info-grid">
                        <div class="info-card">
                            <div class="info-card-title">ğŸ“ AVG_SENTENCE_LENGTH</div>
                            <div class="info-card-content">
                                <strong>í‰ê·  ë¬¸ì¥ ê¸¸ì´</strong> (ë‹¨ì–´ ìˆ˜)<br>
                                ì˜ˆì‹œ: ëª©í‘œ 12.3 Â± 1.97<br>
                                â†’ í—ˆìš© ë²”ìœ„: [10.33 ~ 14.27]
                            </div>
                        </div>
                        <div class="info-card">
                            <div class="info-card-title">ğŸ”— All_Embedded_Clauses_Ratio</div>
                            <div class="info-card-content">
                                <strong>ë‚´í¬ì ˆ ë¹„ìœ¨</strong> (êµ¬ë¬¸ ë³µì¡ë„)<br>
                                ì˜ˆì‹œ: ëª©í‘œ 0.18 Â± 0.202<br>
                                â†’ í—ˆìš© ë²”ìœ„: [-0.022 ~ 0.382]
                            </div>
                        </div>
                        <div class="info-card">
                            <div class="info-card-title">ğŸ“š CEFR_NVJD_A1A2_lemma_ratio</div>
                            <div class="info-card-content">
                                <strong>A1/A2 ë ˆë²¨ ì–´íœ˜ ë¹„ìœ¨</strong><br>
                                ì˜ˆì‹œ: ëª©í‘œ 0.46 Â± 0.104<br>
                                â†’ í—ˆìš© ë²”ìœ„: [0.356 ~ 0.564]
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-info mt-2">
                        <strong>ğŸ’¡ í•µì‹¬ ê´€ì :</strong> ì´ ì§€ë¬¸ ìƒì„± íŒŒì´í”„ë¼ì¸ì€ <strong>ì •ëŸ‰ ì§€í‘œ</strong>(ì˜ˆ: ë¬¸ì¥ ê¸¸ì´Â·êµ¬ë¬¸ ë³µì¡ë„Â·CEFR ì–´íœ˜ ë¹„ìœ¨)ë¡œ í’ˆì§ˆì„ 1ì°¨ ê²€ì¦í•˜ê³ ,
                        ë™ì‹œì— <strong>ì •ì„±ì ì¸ ì½˜í…ì¸ (ë‚´ìš©)</strong>ê¹Œì§€ í•¨ê»˜ ê³ ë ¤í•˜ì—¬ ìµœì¢… í’ˆì§ˆì„ ë³´ì¥í•©ë‹ˆë‹¤.
                    </div>

                    <div class="info-card mt-2">
                        <div class="info-card-title">ğŸ—ºï¸ PassageGen Flow (ì •ëŸ‰ + ì •ì„± í†µí•©)</div>
                        <div class="info-card-content">
                            ì •ëŸ‰ ì§€í‘œ í•„í„°ë§ê³¼ ì •ì„± ê²€ìˆ˜ë¥¼ ê²°í•©í•œ ì „ì²´ íë¦„ì„ í•œ ì¥ìœ¼ë¡œ ìš”ì•½í•œ ë‹¤ì´ì–´ê·¸ë¨ì…ë‹ˆë‹¤.
                            <figure class="pipeline-figure">
                                <a href="TFT%20passageGen_batch2.2%20flow.png" target="_blank" rel="noopener">
                                    <img src="TFT%20passageGen_batch2.2%20flow.png" alt="TFT passageGen batch2.2 flow diagram" loading="lazy">
                                </a>
                                <figcaption>(íŒŒì¼: <code>TFT passageGen_batch3 flow.png</code>)</figcaption>
                            </figure>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 1: Passage Generator -->
            <section class="section" id="step-1">
                <div class="section-header">
                    <span class="section-number">1</span>
                    <h2 class="section-title">Passage Generator</h2>
                    <span class="section-badge badge-generate">ìƒì„±</span>
                </div>
                <div class="section-content">
                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                        <p>LLMì„ ì‚¬ìš©í•˜ì—¬ êµìœ¡ìš© ì˜ì–´ ì§€ë¬¸ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ“¥ ì…ë ¥ íŒŒë¼ë¯¸í„°</h3>
                        <ul>
                            <li>í•™ìŠµì ìœ í˜• (learner_type)</li>
                            <li>ëª©í‘œ ì½ê¸° ìŠ¤í‚¬ (target_reading_skill)</li>
                            <li>ë‹¨ì–´ ìˆ˜ (word_count)</li>
                            <li>ì¥ë¥´, í†¤, ìŠ¤íƒ€ì¼</li>
                            <li>êµ¬ë¬¸/ì–´íœ˜ ë‚œì´ë„ ê°€ì´ë“œë¼ì¸ (semantic difficulty, lexical difficulty)</li>
                            <li>ê¸ˆì§€ í† í”½ ëª©ë¡ (topic_prohibition)</li>
                            <li>ì›ë³¸ êµì¬ ì§€ë¬¸ì˜ profile (semantic_profile) : MAG, S, GT/MGT 3ê°€ì§€ ë ˆë²¨ ë§ˆë‹¤ profile depth ë¥¼ ë‹¤ë¥´ê²Œ ì„¤ì •</li>
                            <li>í† í”½ ìœ ì‚¬ë„ ì œì•½ ì¡°ê±´</li>
                        </ul>

                        <div class="param-examples mt-2">
                            <div class="param-examples-title">ğŸ“ ì˜ˆì‹œ/ì„¤ëª… (í•„ìš”í•œ í•­ëª©ë§Œ)</div>
                            <ul class="param-examples-list">
                                <li><span class="param-key">learner_type</span> <span class="param-desc">ì˜ˆ: <code>1st graders 2nd semester North American elementary students</code></span></li>
                                <li><span class="param-key">target_reading_skill</span> <span class="param-desc">ì˜ˆ: <code>analyzing conflict and solutions</code></span></li>
                                <li><span class="param-key">word_count</span> <span class="param-desc">ì˜ˆ: <code>180</code> (ëŒ€ëµ Â±10 ë‹¨ì–´ í—ˆìš©)</span></li>
                                <li><span class="param-key">topic_prohibition</span> <span class="param-desc">ì˜ˆ: ê¸ˆì§€ ê³ ìœ ëª…ì‚¬/í† í”½ ë¦¬ìŠ¤íŠ¸(êµì¬Â·ë¸Œëœë“œÂ·ì¸ë¬¼ëª… ë“±)</span></li>
                                <li><span class="param-key">semantic_profile</span> <span class="param-desc">ì›ë³¸ êµì¬ ì§€ë¬¸ ë¶„ì„ í”„ë¡œí•„. ë ˆë²¨(MAG, S, GT/MGT)ë§ˆë‹¤ depthë¥¼ ë‹¤ë¥´ê²Œ ì„¤ì •</span></li>
                            </ul>
                        </div>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ“¤ ì¶œë ¥ í˜•ì‹</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-language">JSON</span>
                                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ Copy</button>
                            </div>
                            <div class="code-content">
                                <pre>{
  "title": "ì§€ë¬¸ ì œëª©",
  "passage": "ìƒì„±ëœ ì§€ë¬¸ ë³¸ë¬¸",
  "topic": "ì£¼ì œ ìš”ì•½ (ProperNoun1, ProperNoun2, ProperNoun3)"
}</pre>
                            </div>
                        </div>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¤– ì‚¬ìš© ëª¨ë¸</h3>
                        <div class="info-grid">
                            <div class="info-card">
                                <div class="info-card-title">chatgpt-4o-latest</div>
                                <div class="info-card-content">ChatGPT ì•±ì—ì„œ ì‚¬ìš©í•˜ëŠ” 4oìš© ëª¨ë¸</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-title">Claude Sonnet 4</div>
                                <div class="info-card-content">Anthropic</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-title">Gemini 2.0 Flash</div>
                                <div class="info-card-content">Google</div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-info">
                        <strong>ğŸ’¡ í•µì‹¬ ë¡œì§:</strong> ì›ë³¸ êµì¬ì˜ êµ¬ë¬¸/ì–´íœ˜ ë‚œì´ë„ë¥¼ ìœ ì‚¬í•˜ê²Œ ìœ ì§€í•˜ë©´ì„œ ìƒˆë¡œìš´ ì§€ë¬¸ ìƒì„±. ê¸ˆì§€ëœ ê³ ìœ ëª…ì‚¬ë‚˜ í† í”½ì„ í”¼í•˜ê³  ìƒˆë¡œìš´ ë‚´ìš© ì°½ì‘.
                        ATOS ê°’ì„ ì›ë³¸ê³¼ +-1ë¡œ ìœ ì§€.
                    </div>
                </div>
            </section>

            <!-- Step 2: Initial Metrics Filter -->
            <section class="section" id="step-2">
                <div class="section-header">
                    <span class="section-number">2</span>
                    <h2 class="section-title">Initial Metrics Filter</h2>
                    <span class="section-badge badge-filter">1ì°¨ ê²€ìˆ˜</span>
                </div>
                <div class="section-content">
                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                        <p>ILS Text Analyzer APIë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ëœ ì§€ë¬¸ì˜ ê¸°ë³¸ í’ˆì§ˆì„ ì •ëŸ‰ì ìœ¼ë¡œ ê²€ì¦í•©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ëª©ì </h3>
                        <ul>
                            <li>ëª…ë°±íˆ ë¶€ì í•©í•œ ì§€ë¬¸ì„ ì¡°ê¸°ì— í•„í„°ë§í•˜ì—¬ í›„ì† ì²˜ë¦¬ ë¹„ìš© ì ˆê°</li>
                            <li>í†µê³„ì  ê¸°ì¤€(Â±1.9Ïƒ)ìœ¼ë¡œ ê°ê´€ì ì¸ 1ì°¨ ê²€ìˆ˜ ìˆ˜í–‰</li>
                        </ul>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ“Š ê²€ì¦ ì§€í‘œ (2ê°œ)</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ì§€í‘œ</th>
                                        <th>ì„¤ëª…</th>
                                        <th>í—ˆìš© ë²”ìœ„</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>AVG_SENTENCE_LENGTH</strong></td>
                                        <td>í‰ê·  ë¬¸ì¥ ê¸¸ì´</td>
                                        <td>Master Â± 1.9Ïƒ</td>
                                    </tr>
                                    <tr>
                                        <td><strong>CEFR_NVJD_A1A2_lemma_ratio</strong></td>
                                        <td>CEFR A1+A2 ì–´íœ˜ ë¹„ìœ¨</td>
                                        <td>Master Â± 1.9Ïƒ</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="alert alert-warning">
                        <strong>âš ï¸ ì°¸ê³ :</strong> ì´ ë‹¨ê³„ëŠ” 3ê°€ì§€ ì§€í‘œë¥¼ ëª¨ë‘ ê²€ì¦í•˜ëŠ” "Text Analyzer" ë‹¨ê³„ì™€ ë‹¬ë¦¬, 2ê°œ ì§€í‘œë§Œ ë¹ ë¥´ê²Œ ê²€ì¦í•˜ì—¬ ì´ˆê¸° í•„í„°ë§ì„
                        ìˆ˜í–‰í•©ë‹ˆë‹¤.
                    </div>
                </div>
            </section>

            <!-- Step 3: Semantic Profile Generator -->
            <section class="section" id="step-3">
                <div class="section-header">
                    <span class="section-number">3</span>
                    <h2 class="section-title">Semantic Profile Generator</h2>
                    <span class="section-badge badge-analyze">ë¶„ì„</span>
                </div>
                <div class="section-content">
                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                        <p>ìƒì„±ëœ ì§€ë¬¸ì˜ ì˜ë¯¸ì  íŠ¹ì„±ì„ êµ¬ì¡°í™”ëœ í”„ë¡œí•„ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ“‹ 2ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤</h3>

                        <div class="info-card mt-2">
                            <div class="info-card-title">Phase 1: ê¸°ë³¸ í”„ë¡œí•„ ìƒì„±</div>
                            <div class="info-card-content">
                                <p class="mb-2">LLM(GPT-4.1)ì„ ì‚¬ìš©í•˜ì—¬ 8ê°œ í•­ëª© ì¶”ì¶œ</p>
                            </div>
                        </div>

                        <div class="info-card mt-2">
                            <div class="info-card-title">Phase 2: Subtopic_2 ìƒì„±</div>
                            <div class="info-card-content">
                                <p class="mb-2">AR Category ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ì—¬ ë” ì„¸ë°€í•œ í•˜ìœ„ ì£¼ì œë¥¼ ë¶„ë¥˜ (300+ ì˜µì…˜)</p>
                            </div>
                        </div>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ“„ í”„ë¡œí•„ êµ¬ì¡° ì˜ˆì‹œ</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-language">JSON - Semantic Profile Example</span>
                                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ Copy</button>
                            </div>
                            <div class="code-content">
                                <pre>{
  "discipline": "People, Society & Culture",
  "subtopic_1": "Family Life",
  "subtopic_2": "Pet Adoption",
  "central_focus": [
    "Ellie's request",
    "choosing a pet",
    "meeting Bean",
    "Bean's growth",
    "play and companionship"
  ],
  "key_concepts": [
    "Ellie", "sister", "brother", "parents",
    "cat", "dog", "barking", "tail-wagging",
    "Bean", "floppy ears", "small and sleepy",
    "soft bed", "leash", "favorite toy", "butterflies"
  ],
  "processes_structures": "Ellie's dilemma initiates as a problem: needing a playmate. Dialogue progresses it to a solution: considering a pet. Subsequent search and criteria assessment culminates in finding Bean, with a concluding reflection on growth and companionship.",
  "setting_context": "The story appears to take place in a modern-day household with a family consisting of children and parents, planning a visit to an animal shelter or similar environment.",
  "purpose_objective": "entertain",
  "genre_form": "narrative"
}</pre>
                            </div>
                        </div>

                        <div class="info-grid mt-3">
                            <div class="info-card">
                                <div class="info-card-title">ğŸ·ï¸ Discipline & Topics</div>
                                <div class="info-card-content">
                                    6ê°œ ëŒ€ë¶„ë¥˜ â†’ ì„¸ë¶€ ì£¼ì œ â†’ 300+ í•˜ìœ„ ì£¼ì œë¡œ ê³„ì¸µì  ë¶„ë¥˜
                                </div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-title">ğŸ¯ Central Focus</div>
                                <div class="info-card-content">
                                    ì§€ë¬¸ì˜ ì£¼ìš” ì„¹ì…˜ì´ë‚˜ ë‹¨ë½ì„ ëŒ€í‘œí•˜ëŠ” í•µì‹¬ ì´ˆì  (5ê°œ ë‚´ì™¸)
                                </div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-title">ğŸ”‘ Key Concepts</div>
                                <div class="info-card-content">
                                    ê³ ìœ ëª…ì‚¬, í•µì‹¬ ìš©ì–´, ë°ì´í„° í¬ì¸íŠ¸ ë“± íŠ¹ì§•ì ì¸ ì•µì»¤ (15ê°œ ë‚´ì™¸)
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-info">
                        <strong></strong> <code></code>
                    </div>
                </div>
            </section>

            <!-- Step 4: Topic Closeness Filter -->
            <section class="section" id="step-4">
                <div class="section-header">
                    <span class="section-number">4</span>
                    <h2 class="section-title">Topic Closeness Filter</h2>
                    <span class="section-badge badge-filter">ìœ ì‚¬ë„ ê²€ì‚¬</span>
                </div>
                <div class="section-content">
                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                        <p>ìƒì„±ëœ ì§€ë¬¸ì´ ì›ë³¸ êµì¬ì§€ë¬¸ê³¼ ì–¼ë§ˆë‚˜ ìœ ì‚¬í•œì§€ë¥¼ í‰ê°€í•©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ï¿½ ë¹„êµ í”„ë¡œì„¸ìŠ¤</h3>
                        <p class="mb-2" style="color: var(--text-secondary);">ì›ë³¸ êµì¬ì˜ Semantic Profileê³¼ ìƒì„±ëœ ì§€ë¬¸ì˜ Semantic
                            Profileì„ LLMì´ ë¹„êµí•˜ì—¬ ìœ ì‚¬ë„ë¥¼ ì ìˆ˜í™”í•©ë‹ˆë‹¤.</p>

                        <!-- Comparison Visualization -->
                        <div
                            style="background: var(--bg-primary); padding: 2rem; border-radius: 8px; margin: 1.5rem 0;">
                            <div
                                style="display: flex; align-items: center; justify-content: space-between; gap: 2rem; flex-wrap: wrap;">
                                <!-- Original Profile -->
                                <div style="flex: 1; min-width: 280px;">
                                    <div
                                        style="background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); padding: 1.5rem; border-radius: 12px; border: 2px solid #2196F3; box-shadow: 0 4px 12px rgba(33, 150, 243, 0.2);">
                                        <div
                                            style="font-weight: 700; color: #1565C0; margin-bottom: 1rem; font-size: 1.1rem; text-align: center;">
                                            ğŸ“š Original Profile</div>
                                        <div
                                            style="background: white; padding: 1rem; border-radius: 8px; font-size: 0.85rem; color: #424242;">
                                            <div style="margin-bottom: 0.5rem;"><strong>Discipline:</strong> Science
                                            </div>
                                            <div style="margin-bottom: 0.5rem;"><strong>Subtopic_1:</strong> Animals
                                            </div>
                                            <div style="margin-bottom: 0.5rem;"><strong>Subtopic_2:</strong> Marine Life
                                            </div>
                                            <div style="margin-bottom: 0.5rem;"><strong>Central Focus:</strong> ocean,
                                                dolphins, communication...</div>
                                            <div style="margin-bottom: 0.5rem;"><strong>Key Concepts:</strong>
                                                echolocation, pods, intelligence...</div>
                                            <div><strong>Genre:</strong> expository</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Comparison Arrow -->
                                <div style="text-align: center; min-width: 100px;">
                                    <div style="font-size: 2rem; color: var(--primary); margin-bottom: 0.5rem;">âš–ï¸</div>
                                    <div style="font-size: 0.9rem; font-weight: 600; color: var(--text-secondary);">
                                        LLM<br />Comparison</div>
                                    <div
                                        style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: var(--bg-tertiary); border-radius: 20px; font-size: 0.85rem; font-weight: 600;">
                                        8ê°œ í•­ëª© í‰ê°€</div>
                                </div>

                                <!-- Generated Profile -->
                                <div style="flex: 1; min-width: 280px;">
                                    <div
                                        style="background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%); padding: 1.5rem; border-radius: 12px; border: 2px solid #9C27B0; box-shadow: 0 4px 12px rgba(156, 39, 176, 0.2);">
                                        <div
                                            style="font-weight: 700; color: #7B1FA2; margin-bottom: 1rem; font-size: 1.1rem; text-align: center;">
                                            âœ¨ Generated Profile</div>
                                        <div
                                            style="background: white; padding: 1rem; border-radius: 8px; font-size: 0.85rem; color: #424242;">
                                            <div style="margin-bottom: 0.5rem;"><strong>Discipline:</strong> Science
                                            </div>
                                            <div style="margin-bottom: 0.5rem;"><strong>Subtopic_1:</strong> Animals
                                            </div>
                                            <div style="margin-bottom: 0.5rem;"><strong>Subtopic_2:</strong> Whales
                                            </div>
                                            <div style="margin-bottom: 0.5rem;"><strong>Central Focus:</strong> ocean,
                                                whales, migration...</div>
                                            <div style="margin-bottom: 0.5rem;"><strong>Key Concepts:</strong> baleen,
                                                krill, songs...</div>
                                            <div><strong>Genre:</strong> expository</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Scoring Result -->
                            <div style="margin-top: 2rem; text-align: center;">
                                <div
                                    style="display: inline-block; background: linear-gradient(135deg, #C8E6C9 0%, #A5D6A7 100%); padding: 1.5rem 3rem; border-radius: 12px; border: 2px solid #4CAF50; box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);">
                                    <div style="font-size: 0.9rem; color: #2E7D32; margin-bottom: 0.5rem;">Total Points
                                    </div>
                                    <div
                                        style="font-size: 2.5rem; font-weight: 700; color: #1B5E20; margin-bottom: 0.5rem;">
                                        8</div>
                                    <div style="font-size: 1.2rem; font-weight: 600; color: #2E7D32;">Closeness Label:
                                        <span style="font-size: 1.5rem;">3</span>
                                    </div>
                                    <div
                                        style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: rgba(255,255,255,0.8); border-radius: 20px; font-size: 0.85rem; color: #1B5E20;">
                                        âœ… ì ì ˆí•œ ìœ ì‚¬ë„ (MAG)</div>
                                </div>
                            </div>
                        </div>

                        <!-- Evaluation Criteria -->
                        <div class="info-grid mt-3">
                            <div class="info-card">
                                <div class="info-card-title">ğŸ“Š 8ê°œ í‰ê°€ í•­ëª©</div>
                                <div class="info-card-content" style="font-size: 0.85rem;">
                                    1. discipline_match<br>
                                    2. subtopic_match<br>
                                    3. central_focus_match<br>
                                    4. key_concept_overlap<br>
                                    5. process_parallel<br>
                                    6. setting_alignment<br>
                                    7. purpose_alignment<br>
                                    8. genre_alignment
                                </div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-title">ğŸ¯ ì ìˆ˜ ê³„ì‚°</div>
                                <div class="info-card-content">
                                    ê° í•­ëª©ë³„ ì ìˆ˜ í•©ì‚° + penalties<br>
                                    â†’ Total Points ì‚°ì¶œ<br>
                                    â†’ Closeness Label (1~5) ë§¤í•‘
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ï¿½ğŸ“Š Closeness Label ë§¤í•‘</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Total Points</th>
                                        <th>Label</th>
                                        <th>ì˜ë¯¸</th>
                                        <th>íŒì •</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>13+</td>
                                        <td>5</td>
                                        <td>ì•„ì£¼ ìœ ì‚¬í•¨</td>
                                        <td style="color: var(--danger);">GT</td>
                                    </tr>
                                    <tr style="background: var(--status-success); color: white;">
                                        <td>7~9</td>
                                        <td>3</td>
                                        <td>ì ì ˆí•œ ìœ ì‚¬ë„</td>
                                        <td>MAG</td>
                                    </tr>
                                    <tr>
                                        <td>0~3</td>
                                        <td>1</td>
                                        <td>ê±°ì˜ ë‹¤ë¦„</td>
                                        <td style="color: var(--danger);">âŒ</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 5: Validation Chain -->
            <section class="section" id="step-5">
                <div class="section-header">
                    <span class="section-number">5</span>
                    <h2 class="section-title">Validation Chain</h2>
                    <span class="section-badge badge-filter">4ë‹¨ê³„ ê²€ì¦</span>
                </div>
                <div class="section-content">
                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                        <p>4ë‹¨ê³„ì˜ ìˆœì°¨ì  LLM í˜¸ì¶œì„ í†µí•´ ì§€ë¬¸ì„ ë‹¤ê°ë„ë¡œ ê²€ì¦í•˜ê³  ìˆ˜ì •í•©ë‹ˆë‹¤. Human validationì„ ëŒ€ì²´í•˜ê¸° ìœ„í•œ ëª©ì ì…ë‹ˆë‹¤.</p>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ”— ìˆœì°¨ì  4ë‹¨ê³„ ê²€ì¦ í”„ë¡œì„¸ìŠ¤</h3>
                        <p class="mb-2" style="color: var(--text-secondary);">ê° LLM í˜¸ì¶œì˜ ì¶œë ¥ì´ ë‹¤ìŒ LLM í˜¸ì¶œì˜ ì…ë ¥ì´ ë˜ëŠ” <strong>ì²´ì¸
                                êµ¬ì¡°</strong>ì…ë‹ˆë‹¤.</p>

                        <!-- Sequential Flow Visualization -->
                        <div
                            style="background: var(--bg-primary); padding: 2rem; border-radius: 8px; margin: 1.5rem 0;">
                            <div
                                style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
                                <div style="flex: 1; min-width: 150px; text-align: center;">
                                    <div
                                        style="background: #E3F2FD; padding: 1rem; border-radius: 8px; border: 2px solid #2196F3;">
                                        <div style="font-weight: 600; color: #1565C0; margin-bottom: 0.5rem;">ğŸ“ Input
                                        </div>
                                        <div style="font-size: 0.85rem; color: #424242;">ìƒì„±ëœ ì§€ë¬¸</div>
                                    </div>
                                </div>
                                <div style="font-size: 1.5rem; color: var(--text-secondary);">â†’</div>
                                <div style="flex: 1; min-width: 150px; text-align: center;">
                                    <div style="background: #E3F2FD; padding: 1rem; border-radius: 8px;">
                                        <div style="font-weight: 600; color: #1565C0; margin-bottom: 0.5rem;">LLM Call 1
                                        </div>
                                        <div style="font-size: 0.85rem; color: #424242;">Genre Mismatch</div>
                                        <div style="font-size: 0.75rem; color: #666; margin-top: 0.25rem;">
                                            OUTPUT_PASSAGE_1</div>
                                    </div>
                                </div>
                                <div style="font-size: 1.5rem; color: var(--text-secondary);">â†’</div>
                                <div style="flex: 1; min-width: 150px; text-align: center;">
                                    <div style="background: #F3E5F5; padding: 1rem; border-radius: 8px;">
                                        <div style="font-weight: 600; color: #7B1FA2; margin-bottom: 0.5rem;">LLM Call 2
                                        </div>
                                        <div style="font-size: 0.85rem; color: #424242;">Awkward Content</div>
                                        <div style="font-size: 0.75rem; color: #666; margin-top: 0.25rem;">
                                            OUTPUT_PASSAGE_2</div>
                                    </div>
                                </div>
                                <div style="font-size: 1.5rem; color: var(--text-secondary);">â†’</div>
                                <div style="flex: 1; min-width: 150px; text-align: center;">
                                    <div style="background: #E8F5E9; padding: 1rem; border-radius: 8px;">
                                        <div style="font-weight: 600; color: #2E7D32; margin-bottom: 0.5rem;">LLM Call 3
                                        </div>
                                        <div style="font-size: 0.85rem; color: #424242;">Grammar Errors</div>
                                        <div style="font-size: 0.75rem; color: #666; margin-top: 0.25rem;">
                                            OUTPUT_PASSAGE_3</div>
                                    </div>
                                </div>
                                <div style="font-size: 1.5rem; color: var(--text-secondary);">â†’</div>
                                <div style="flex: 1; min-width: 150px; text-align: center;">
                                    <div style="background: #FFF3E0; padding: 1rem; border-radius: 8px;">
                                        <div style="font-weight: 600; color: #E65100; margin-bottom: 0.5rem;">LLM Call 4
                                        </div>
                                        <div style="font-size: 0.85rem; color: #424242;">Factual Check</div>
                                        <div style="font-size: 0.75rem; color: #666; margin-top: 0.25rem;">
                                            OUTPUT_PASSAGE_4</div>
                                    </div>
                                </div>
                                <div style="font-size: 1.5rem; color: var(--text-secondary);">â†’</div>
                                <div style="flex: 1; min-width: 150px; text-align: center;">
                                    <div
                                        style="background: #C8E6C9; padding: 1rem; border-radius: 8px; border: 2px solid #4CAF50;">
                                        <div style="font-weight: 600; color: #2E7D32; margin-bottom: 0.5rem;">âœ… Output
                                        </div>
                                        <div style="font-size: 0.85rem; color: #424242;">ê²€ì¦ëœ ì§€ë¬¸</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="info-grid">
                            <div class="info-card" style="background: #E3F2FD;">
                                <div class="info-card-title">1ï¸âƒ£ Genre Mismatch</div>
                                <div class="info-card-content">
                                    <strong>ê²€ì¦ í•­ëª©:</strong> ì¥ë¥´ì™€ ë‚´ìš© ì¼ì¹˜ í™•ì¸<br>
                                    <strong>ì˜ˆì‹œ:</strong> Expository ì§€ë¬¸ì¸ë° narrative ìš”ì†Œ ê³¼ë‹¤
                                </div>
                            </div>
                            <div class="info-card" style="background: #F3E5F5;">
                                <div class="info-card-title">2ï¸âƒ£ Awkward/Unnatural Content</div>
                                <div class="info-card-content">
                                    <strong>ê²€ì¦ í•­ëª©:</strong> ë¶€ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„ ìˆ˜ì •<br>
                                    <strong>ì˜ˆì‹œ:</strong> ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì£¼ì œ ì „í™˜, ë…¼ë¦¬ íë¦„ ë‹¨ì ˆ
                                </div>
                            </div>
                            <div class="info-card" style="background: #E8F5E9;">
                                <div class="info-card-title">3ï¸âƒ£ Typos/Grammar Errors</div>
                                <div class="info-card-content">
                                    <strong>ê²€ì¦ í•­ëª©:</strong> ì˜¤íƒ€/ë¬¸ë²• êµì •<br>
                                    <strong>ì˜ˆì‹œ:</strong> ì£¼ì–´-ë™ì‚¬ ë¶ˆì¼ì¹˜, ì‹œì œ ì˜¤ë¥˜, ê´€ì‚¬ ì˜¤ìš©
                                </div>
                            </div>
                            <div class="info-card" style="background: #FFF3E0;">
                                <div class="info-card-title">4ï¸âƒ£ Logical/Factual Inaccuracy</div>
                                <div class="info-card-content">
                                    <strong>ê²€ì¦ í•­ëª©:</strong> ë…¼ë¦¬/ì‚¬ì‹¤ ê²€ì¦<br>
                                    <strong>ì˜ˆì‹œ:</strong> ê³¼í•™ì  ì˜¤ë¥˜, ì—­ì‚¬ì  ë¶€ì •í™•ì„±, ë…¼ë¦¬ì  ëª¨ìˆœ
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-info">
                        <strong>ğŸ“¤ ì¶œë ¥ í˜•ì‹:</strong> ê° LLM í˜¸ì¶œì€ <code>{OUTPUT_TITLE}, {OUTPUT_PASSAGE}</code> ë¡œ ì¶œë ¥í•˜ë©°,
                        G-sheetì— ê° ë‹¨ê³„ë³„ ê²°ê³¼ë¥¼ ì €ì¥í•˜ì—¬ ë³€í™” ì¶”ì ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                    </div>

                    <div class="alert alert-warning">
                        <strong>âš ï¸ êµ¬í˜„ ìƒíƒœ:</strong> í˜„ì¬ ì„¤ê³„ãƒ»í…ŒìŠ¤íŠ¸ ë‹¨ê³„ì´ë©°, ATLASì—ì„œ ë°°ì¹˜ ì‹¤í–‰ í›„ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤. í–¥í›„ ì¬êµ¬ì„± ì˜ˆì •ì…ë‹ˆë‹¤.
                    </div>
                </div>
            </section>

            <!-- Step 6: Text Analyzer -->
            <section class="section" id="step-6">
                <div class="section-header">
                    <span class="section-number">6</span>
                    <h2 class="section-title">Text Analyzer</h2>
                    <span class="section-badge badge-analyze">3ì§€í‘œ ë¶„ì„</span>
                </div>
                <div class="section-content">
                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                        <p>ì™¸ë¶€ ILS Text Analyzer APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì§€ë¬¸ì˜ êµ¬ë¬¸/ì–´íœ˜ ì§€í‘œë¥¼ ì •ëŸ‰ì ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ëª©ì </h3>
                        <ul>
                            <li>3ê°€ì§€ í•µì‹¬ ì§€í‘œë¥¼ ì •ë°€í•˜ê²Œ ì¸¡ì •í•˜ì—¬ í’ˆì§ˆ ê²€ì¦</li>
                            <li>ë§ˆìŠ¤í„° ê¸°ì¤€ê³¼ ë¹„êµí•˜ì—¬ Pass/Fail íŒë‹¨ ë° Case ë¶„ë¥˜</li>
                            <li>êµ¬ë¬¸/ì–´íœ˜ ìˆ˜ì •ì´ í•„ìš”í•œì§€ ê²°ì •í•˜ëŠ” í•µì‹¬ ë‹¨ê³„</li>
                        </ul>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ“Š ê²€ì¦ ì§€í‘œ (3ê°œ)</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ì§€í‘œ</th>
                                        <th>ì„¤ëª…</th>
                                        <th>í—ˆìš© ë²”ìœ„</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>AVG_SENTENCE_LENGTH</strong></td>
                                        <td>í‰ê·  ë¬¸ì¥ ê¸¸ì´ (ë‹¨ì–´ ìˆ˜)</td>
                                        <td>Master Â± tolerance_abs</td>
                                    </tr>
                                    <tr>
                                        <td><strong>All_Embedded_Clauses_Ratio</strong></td>
                                        <td>ë‚´í¬ì ˆ ë¹„ìœ¨ (êµ¬ë¬¸ ë³µì¡ë„)</td>
                                        <td>Master Â± tolerance_ratio</td>
                                    </tr>
                                    <tr>
                                        <td><strong>CEFR_NVJD_A1A2_lemma_ratio</strong></td>
                                        <td>CEFR A1+A2 ë ˆë²¨ ì–´íœ˜ ë¹„ìœ¨</td>
                                        <td>Master Â± tolerance_ratio</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ”€ 3ê°€ì§€ Case ë¶„ë¥˜</h3>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Case</th>
                                        <th>êµ¬ë¬¸</th>
                                        <th>ì–´íœ˜</th>
                                        <th>ë‹¤ìŒ ë‹¨ê³„</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Case A</strong></td>
                                        <td style="color: var(--success);">âœ… PASS</td>
                                        <td style="color: var(--success);">âœ… PASS</td>
                                        <td style="background: var(--status-success); color: white;">ì¦‰ì‹œ Final</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Case B</strong></td>
                                        <td style="color: var(--success);">âœ… PASS</td>
                                        <td style="color: var(--danger);">âŒ FAIL</td>
                                        <td>ì–´íœ˜ ìˆ˜ì • ëª¨ë“ˆ</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Case C</strong></td>
                                        <td style="color: var(--danger);">âŒ FAIL</td>
                                        <td>-</td>
                                        <td>êµ¬ë¬¸ ìˆ˜ì • ëª¨ë“ˆ</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 7: Syntax Revision -->
            <section class="section" id="step-7">
                <div class="section-header">
                    <span class="section-number">7</span>
                    <h2 class="section-title">Syntax Revision Module</h2>
                    <span class="section-badge badge-revise">êµ¬ë¬¸ ìˆ˜ì •</span>
                </div>
                <div class="section-content">
                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                        <p>êµ¬ë¬¸ ì§€í‘œê°€ ëª©í‘œ ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ê²½ìš°, LLMì„ ì‚¬ìš©í•˜ì—¬ ë¬¸ì¥ êµ¬ì¡°ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¤– LLM ì „ëµ</h3>
                        <div class="info-grid">
                            <div class="info-card">
                                <div class="info-card-title">Temperature [0.2, 0.3]</div>
                                <div class="info-card-content">ê° temperatureë³„ 2ê°œ = ì´ 4ê°œ í›„ë³´ ìƒì„±</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-title">ìˆœì°¨ ë¶„ì„</div>
                                <div class="info-card-content">ì²« ë²ˆì§¸ í†µê³¼í•œ í›„ë³´ ì„ íƒ</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-title">ì™„ì „ ìë™í™”</div>
                                <div class="info-card-content">ì‚¬ëŒ ê°œì… ë¶ˆí•„ìš”</div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-success">
                        <strong>âœ… ìë™í™”:</strong> êµ¬ë¬¸ ìˆ˜ì •ì€ ì™„ì „íˆ ìë™í™”ë˜ì–´ ìˆìœ¼ë©°, ì‚¬ëŒì˜ ê°œì…ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                    </div>
                </div>
            </section>

            <!-- Step 8: Lexical Revision -->
            <section class="section" id="step-8">
                <div class="section-header">
                    <span class="section-number">8</span>
                    <h2 class="section-title">Lexical Revision Module</h2>
                    <span class="section-badge badge-revise">ì–´íœ˜ ìˆ˜ì •</span>
                </div>
                <div class="section-content">
                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                        <p>ì–´íœ˜ ì§€í‘œê°€ ëª©í‘œ ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ê²½ìš°, ë¬¸ì¥ë³„ë¡œ ì–´íœ˜ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">ğŸ¤– LLM í˜¸ì¶œ ì „ëµ</h3>
                        <div class="info-grid">
                            <div class="info-card">
                                <div class="info-card-title">3íšŒ í˜¸ì¶œ</div>
                                <div class="info-card-content">ê° í˜¸ì¶œë§ˆë‹¤ ë¬¸ì¥ë³„ë¡œ 3ê°œ ìˆ˜ì •ì•ˆ<br>ìµœëŒ€ 9ê°œ ì–´íœ˜ ëŒ€ì•ˆ</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-title">Temperature 0.2</div>
                                <div class="info-card-content">ì¼ê´€ì„± ì¤‘ì‹œ</div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-title">ì¤‘ë³µ ì œê±°</div>
                                <div class="info-card-content">ìë™ ì¤‘ë³µ ì œê±°</div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-warning">
                        <strong>ğŸ‘¤ ì‚¬ëŒì˜ ê°œì…:</strong> ì–´íœ˜ ìˆ˜ì •ì€ <strong>ì‚¬ëŒì´ ìµœì¢… ì„ íƒ</strong>í•©ë‹ˆë‹¤.
                    </div>
                </div>
            </section>

            <!-- Troubleshooting -->
            <section class="section" id="troubleshooting">
                <div class="section-header">
                    <h2 class="section-title">ğŸ”§ Troubleshooting Guide</h2>
                </div>
                <!-- <div class="section-content">
                    <div class="subsection">
                        <h3 class="subsection-title">êµ¬ë¬¸ ìˆ˜ì •ì´ ê³„ì† ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°</h3>
                        <div class="alert alert-danger">
                            <strong>ì›ì¸:</strong> Tolerance ë²”ìœ„ê°€ ë„ˆë¬´ ì¢ìŒ, LLM í›„ë³´ ëª¨ë‘ ë²”ìœ„ ë°–
                        </div>
                        <div class="alert alert-success">
                            <strong>í•´ê²°ì±…:</strong> Tolerance ê°’ ì¡°ì •, ë‹¤ë¥¸ LLM ëª¨ë¸ ì‹œë„
                        </div>
                    </div>

                    <div class="subsection">
                        <h3 class="subsection-title">API íƒ€ì„ì•„ì›ƒ ë°œìƒ</h3>
                        <div class="alert alert-success">
                            <strong>í•´ê²°ì±…:</strong> PIPELINE_TIMEOUT ê°’ ì¦ê°€ (ê¸°ë³¸ 300ì´ˆ), ë°°ì¹˜ í¬ê¸° ì¤„ì´ê¸°
                        </div>
                    </div>
                </div> -->
            </section>

            <!-- Glossary -->
            <section class="section" id="glossary">
                <div class="section-header">
                    <h2 class="section-title">ğŸ“– ìš©ì–´ ì„¤ëª…</h2>
                </div>
                <div class="section-content">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ìš©ì–´</th>
                                    <th>ì„¤ëª…</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Embedded Clauses</strong></td>
                                    <td>ë¬¸ì¥ ë‚´ì— í¬í•¨ëœ ì¢…ì†ì ˆ</td>
                                </tr>
                                <tr>
                                    <td><strong>CEFR</strong></td>
                                    <td>ìœ ëŸ½ ì–¸ì–´ ê³µí†µ ì°¸ì¡° ê¸°ì¤€ (A1/A2: ì´ˆê¸‰, B1/B2: ì¤‘ê¸‰, C1/C2: ê³ ê¸‰)</td>
                                </tr>
                                <tr>
                                    <td><strong>Temperature</strong></td>
                                    <td>LLM ìƒì„± ì‹œ ì°½ì˜ì„±/ì¼ê´€ì„± ì¡°ì ˆ (0.2: ì¼ê´€ì„± â†” 1.0: ì°½ì˜ì„±)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            </div>
            <!-- End Passage Pipeline Content -->

            <!-- Question Pipeline Content -->
            <div id="question-content" class="tab-content question-pipeline">
                <!-- Interactive Flowchart -->
                <div class="flowchart-container">
                    <div class="flowchart-header">
                        <div class="flowchart-title">ğŸ“Š Flow Chart</div>
                        <div class="flowchart-controls">
                            <button class="flowchart-btn" onclick="resetQuestionZoom()">ğŸ” Reset Zoom</button>
                            <button class="flowchart-btn" onclick="centerQuestionFlowchart()">ğŸ¯ Center</button>
                        </div>
                    </div>
                    <svg id="question-flowchart"></svg>
                </div>

                <!-- Step 1: Question Generator -->
                <section class="section" id="q-step-1">
                    <div class="section-header">
                        <span class="section-number">1</span>
                        <h2 class="section-title">Question Generator</h2>
                        <span class="section-badge badge-generate">ë¬¸í•­ ìƒì„±</span>
                    </div>
                    <div class="section-content">
                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                            <p>ì£¼ì–´ì§„ ì§€ë¬¸(passage)ì„ ê¸°ë°˜ìœ¼ë¡œ ê°ê´€ì‹ ë…í•´ ë¬¸ì œ(MCQ)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ“¥ ì…ë ¥ íŒŒë¼ë¯¸í„°</h3>
                            <ul>
                                <li>í•™ìŠµì ìœ í˜• (var_learner_type) </li>
                                <li>ë¬¸í•­ í˜•íƒœ (var_question_form: positive/negative)</li>
                                <li>ìƒì„±í•  ë¬¸í•­ ìˆ˜ (var_question_number)</li>
                                <li>ì¥ë¥´ (var_broad_genre)</li>
                                <li>ëª©í‘œ ì½ê¸° ìŠ¤í‚¬ (var_target_reading_skill)</li>
                                <li>ì½ê¸° ìŠ¤í‚¬ ì„¤ëª… (var_reading_skill_explanation_stem)</li>
                                <li>ì½ê¸° ìŠ¤í‚¬ ê°œìš” (var_reading_skill_overview)</li>
                                <li>MCQ ìƒì„± ê¸°ì¤€ (var_mcq_generation_criteria)</li>
                                <li>ì§€ë¬¸ (var_passage)</li>
                                <li>ë‚œì´ë„ (var_difficulty)</li>
                                <li>ì›ë³¸ ë¬¸í•­ (var_original_question)</li>
                            </ul>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ“¤ ì¶œë ¥ í˜•ì‹</h3>
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-language">JSON Array</span>
                                    <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ Copy</button>
                                </div>
                                <div class="code-content">
                                    <pre>[
  {
    "question_number": 1,
    "stem": "ë¬¸í•­ ì§ˆë¬¸ í…ìŠ¤íŠ¸",
    "options": {
      "A": "ì„ íƒì§€ A",
      "B": "ì„ íƒì§€ B",
      "C": "ì„ íƒì§€ C",
      "D": "ì„ íƒì§€ D"
    },
    "key": "B",
    "explanation": "ì •ë‹µ ì„¤ëª…"
  }
]</pre>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ¤– ì‚¬ìš© ëª¨ë¸</h3>
                            <div class="info-card">
                                <div class="info-card-title">chatgpt-4o-latest</div>
                                <div class="info-card-content">ChatGPT ì•±ì—ì„œ ì‚¬ìš©í•˜ëŠ” 4o ëª¨ë¸</div>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <strong>ğŸ’¡ í•µì‹¬ ë¡œì§:</strong> Common Core State Standardsì— ë§ì¶° íŠ¹ì • ì½ê¸° ìŠ¤í‚¬ì„ í‰ê°€í•˜ëŠ” ë¬¸í•­ ìƒì„±.
                            ë¬¸í•­ í˜•íƒœ(positive/negative)ì— ë”°ë¼ ì§ˆë¬¸ êµ¬ì¡° ì¡°ì •. ì •ë‹µ(key)ì˜ ìœ„ì¹˜ë¥¼ ë¬´ì‘ìœ„ë¡œ ë°°ì¹˜í•˜ì—¬ íŒ¨í„´ ë°©ì§€.
                        </div>
                    </div>
                </section>

                <!-- Step 2: Meta Labeling -->
                <section class="section" id="q-step-2">
                    <div class="section-header">
                        <span class="section-number">2</span>
                        <h2 class="section-title">Meta Labeling</h2>
                        <span class="section-badge badge-analyze">ë©”íƒ€ ë¶„ì„</span>
                    </div>
                    <div class="section-content">
                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                            <p>ìƒì„±ëœ ë¬¸í•­ì˜ êµ¬ì¡°ì Â·ì–¸ì–´ì  íŠ¹ì„±ì„ 3ê°€ì§€ ê´€ì ì—ì„œ ë¶„ì„í•˜ê³  ë¶„ë¥˜í•©ë‹ˆë‹¤.</p>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ“Š 3ê°€ì§€ ë¶„ì„ ìœ í˜•</h3>
                            <div class="info-grid">
                                <div class="info-card">
                                    <div class="info-card-title">2a. Stem Analysis</div>
                                    <div class="info-card-content">
                                        ë¬¸í•­ ì§ˆë¬¸ì˜ êµ¬ë¬¸ êµ¬ì¡° ë¶„ì„
                                    </div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">2b. Options Structure</div>
                                    <div class="info-card-content">
                                        ì„ íƒì§€ì˜ ë¬¸ë²•ì  êµ¬ì¡° ë¶„ì„
                                    </div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">2c. Options Language</div>
                                    <div class="info-card-content">
                                        ì„ íƒì§€ì™€ ì§€ë¬¸ì˜ ì–¸ì–´ì  ê´€ê³„ ë¶„ì„
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ¤– ì‚¬ìš© ëª¨ë¸</h3>
                            <div class="info-card">
                                <div class="info-card-title">gpt-4.1</div>
                                <div class="info-card-content">ì •ë°€í•œ êµ¬ì¡° ë¶„ì„ì„ ìœ„í•œ ëª¨ë¸</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Step 2a: Stem Analysis -->
                <section class="section" id="q-step-2a">
                    <div class="section-header">
                        <span class="section-number">2a</span>
                        <h2 class="section-title">Stem Analysis</h2>
                        <span class="section-badge badge-analyze">ì§ˆë¬¸ êµ¬ì¡°</span>
                    </div>
                    <div class="section-content">
                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                            <p>ë¬¸í•­ì˜ ì§ˆë¬¸(stem) í…ìŠ¤íŠ¸ë¥¼ ë¶„ì„í•˜ì—¬ ì£¼ì–´-ë™ì‚¬(S-V) ìŒì„ ì¹´ìš´íŠ¸í•˜ê³  4ê°€ì§€ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤.</p>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ“‹ ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬</h3>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ì¹´í…Œê³ ë¦¬</th>
                                            <th>ì¡°ê±´</th>
                                            <th>ì˜ˆì‹œ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Phrase</strong></td>
                                            <td>0ê°œ S-V ìŒ ë˜ëŠ” í•„ìˆ˜ ìš”ì†Œ ë¹ˆì¹¸</td>
                                            <td>"The author thinks that Jane's work ____."</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Simple Sentence</strong></td>
                                            <td>1ê°œ ì™„ì „í•œ S-V, ë¹ˆì¹¸ ì—†ìŒ</td>
                                            <td>"Dogs bark loudly."</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Complex Sentence</strong></td>
                                            <td>2ê°œ ì´ìƒ ì™„ì „í•œ S-V, ë¹ˆì¹¸ ì—†ìŒ</td>
                                            <td>"Which option shows what dogs do?"</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Excerpt</strong></td>
                                            <td>ì¸ìš©ë¬¸ + ë³„ë„ ì§ˆë¬¸</td>
                                            <td>ì¸ìš© + ì§ˆë¬¸ ì¡°í•©</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ“¤ ì¶œë ¥ í˜•ì‹</h3>
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-language">JSON</span>
                                    <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ Copy</button>
                                </div>
                                <div class="code-content">
                                    <pre>{
  "stem": "ì…ë ¥ëœ ì§ˆë¬¸ í…ìŠ¤íŠ¸",
  "Stem_COT": "ë¶„ì„ ê³¼ì • ì„¤ëª…",
  "classification": "Phrase|Simple Sentence|Complex Sentence|Excerpt"
}</pre>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <strong>ğŸ’¡ í•µì‹¬ ê·œì¹™:</strong> ë¹ˆì¹¸ì´ í•„ìˆ˜ ë¬¸ë²• ìš”ì†Œë¥¼ ì±„ìš°ëŠ” ê²½ìš° í•­ìƒ Phraseë¡œ ë¶„ë¥˜.
                            ìˆ¨ê²¨ì§„ ê´€ê³„ì ˆ(that/which/who ìƒëµ)ë„ S-V ìŒìœ¼ë¡œ ì¹´ìš´íŠ¸.
                        </div>
                    </div>
                </section>

                <!-- Step 2b: Options Structure -->
                <section class="section" id="q-step-2b">
                    <div class="section-header">
                        <span class="section-number">2b</span>
                        <h2 class="section-title">Options Structure</h2>
                        <span class="section-badge badge-analyze">ì„ íƒì§€ êµ¬ì¡°</span>
                    </div>
                    <div class="section-content">
                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                            <p>ê° ì„ íƒì§€(A, B, C, D)ì˜ ë¬¸ë²•ì  êµ¬ì¡°ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤. Stem ë‚´ ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¼ ë‹¤ë¥¸ ë¶„ì„ ê²½ë¡œë¥¼ ì ìš©í•©ë‹ˆë‹¤.</p>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ”€ 2ë‹¨ê³„ ë¶„ì„ í”„ë¡œì„¸ìŠ¤</h3>
                            <div class="info-grid">
                                <div class="info-card">
                                    <div class="info-card-title">Path A: Contextual Analysis</div>
                                    <div class="info-card-content">
                                        ì„ íƒì§€ê°€ Stem ë‚´ì— ì¡´ì¬í•˜ëŠ” ê²½ìš°<br>
                                        â†’ Stem ë‚´ì—ì„œì˜ ë¬¸ë²•ì  ì—­í•  ë¶„ì„
                                    </div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">Path B: Independent Analysis</div>
                                    <div class="info-card-content">
                                        ì„ íƒì§€ê°€ Stem ë‚´ì— ì—†ëŠ” ê²½ìš°<br>
                                        â†’ ë…ë¦½ì ì¸ êµ¬ì¡°ë¡œ ë¶„ì„
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ“‹ ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬</h3>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ì¹´í…Œê³ ë¦¬</th>
                                            <th>ì¡°ê±´</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Word</strong></td>
                                            <td>ë‹¨ì¼ ì–´íœ˜ ë‹¨ìœ„ (ë³µí•©ëª…ì‚¬ í¬í•¨)</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Phrase</strong></td>
                                            <td>ì™„ì „í•œ S-V êµ¬ì¡° ì—†ìŒ ë˜ëŠ” ë¬¸ì¥ ì¢…ê²° êµ¬ë‘ì  ì—†ìŒ</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Simple Sentence</strong></td>
                                            <td>1ê°œ ë…ë¦½ì ˆ, 0ê°œ ì¢…ì†ì ˆ + ë¬¸ì¥ ì¢…ê²° êµ¬ë‘ì </td>
                                        </tr>
                                        <tr>
                                            <td><strong>Compound Sentence</strong></td>
                                            <td>2ê°œ ì´ìƒ ë…ë¦½ì ˆ, 0ê°œ ì¢…ì†ì ˆ + ë¬¸ì¥ ì¢…ê²° êµ¬ë‘ì </td>
                                        </tr>
                                        <tr>
                                            <td><strong>Complex Sentence</strong></td>
                                            <td>ìµœì†Œ 1ê°œ ë…ë¦½ì ˆ + 1ê°œ ì¢…ì†ì ˆ + ë¬¸ì¥ ì¢…ê²° êµ¬ë‘ì </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="alert alert-warning">
                            <strong>âš ï¸ êµ¬ë‘ì  ìš°ì„  ê·œì¹™:</strong> ë¬¸ì¥ ì¢…ê²° êµ¬ë‘ì (. ? ! ;)ì´ ì—†ìœ¼ë©´ Simple/Compound/Complexë¡œ ë¶„ë¥˜ ë¶ˆê°€.
                            ì™„ì „í•œ S-V êµ¬ì¡°ê°€ ìˆì–´ë„ êµ¬ë‘ì ì´ ì—†ìœ¼ë©´ Phraseë¡œ ë¶„ë¥˜ë©ë‹ˆë‹¤.
                        </div>
                    </div>
                </section>

                <!-- Step 2c: Options Language -->
                <section class="section" id="q-step-2c">
                    <div class="section-header">
                        <span class="section-number">2c</span>
                        <h2 class="section-title">Options Language</h2>
                        <span class="section-badge badge-analyze">ì–¸ì–´ ê´€ê³„</span>
                    </div>
                    <div class="section-content">
                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ¯ ì—­í• </h3>
                            <p>ê° ì„ íƒì§€ì™€ ì›ë³¸ ì§€ë¬¸(passage)ì˜ ì–¸ì–´ì  ê´€ê³„ë¥¼ ë¶„ì„í•˜ì—¬ 5ê°€ì§€ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤.</p>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ” ë¶„ì„ í”„ë¡œì„¸ìŠ¤ (ìš°ì„ ìˆœìœ„)</h3>
                            <ol>
                                <li>ë¬¸í•­(Question)ì˜ ë§¥ë½ì„ ê³ ë ¤í•˜ì—¬ ë¶„ë¥˜ ê²½ê³„ íŒŒì•…</li>
                                <li>100% ë™ì¼ ì—¬ë¶€ í™•ì¸ â†’ Fully Verbatim</li>
                                <li>ì§€ë¬¸ì— ì—†ëŠ” ë‚´ìš© í™•ì¸ â†’ Content Not Found In Passage</li>
                                <li>ì¶”ë¡  vs ì¬í‘œí˜„ íŒë‹¨ (ë¬¸í•­ ë§¥ë½ ê³ ë ¤)</li>
                                <li>ë™ì˜ì–´ ì¹˜í™˜ ì—¬ë¶€ â†’ Synonym Substitution</li>
                                <li>ê¸°ë³¸ ì¬í‘œí˜„ â†’ Simple Rephrasing</li>
                            </ol>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ“‹ ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬</h3>
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ì¹´í…Œê³ ë¦¬</th>
                                            <th>ì„¤ëª…</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Fully Verbatim</strong></td>
                                            <td>ì§€ë¬¸ê³¼ 100% ë™ì¼í•œ í‘œí˜„ (êµ¬ë‘ì  í¬í•¨)</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Simple Rephrasing</strong></td>
                                            <td>ì†Œí­ ë¬¸ë²•Â·êµ¬ì¡° ë³€ê²½, ë™ì¼ ì–´íœ˜Â·ì˜ë¯¸ ìœ ì§€</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Synonym Substitution</strong></td>
                                            <td>ë™ì˜ì–´ ì¹˜í™˜, ë¬¸ì¥ êµ¬ì¡°ëŠ” ë™ì¼</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Inferential Paraphrasing</strong></td>
                                            <td>ë…¼ë¦¬ì  ì¶”ë¡  í•„ìš”, ì—¬ëŸ¬ ì •ë³´ ì¢…í•© ë˜ëŠ” ëª©ì Â·ì˜ë¯¸ í•´ì„</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Content Not Found In Passage</strong></td>
                                            <td>ì§€ë¬¸ì— ì—†ê±°ë‚˜ ëª¨ìˆœë˜ëŠ” ë‚´ìš©</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="subsection">
                            <h3 class="subsection-title">ğŸ“¤ ì¶œë ¥ í˜•ì‹</h3>
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-language">JSON</span>
                                    <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ Copy</button>
                                </div>
                                <div class="code-content">
                                    <pre>{
  "option_A_text": "ì„ íƒì§€ A í…ìŠ¤íŠ¸",
  "option_A_language": "ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬",
  "option_B_text": "ì„ íƒì§€ B í…ìŠ¤íŠ¸",
  "option_B_language": "ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬",
  "option_C_text": "ì„ íƒì§€ C í…ìŠ¤íŠ¸",
  "option_C_language": "ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬",
  "option_D_text": "ì„ íƒì§€ D í…ìŠ¤íŠ¸",
  "option_D_language": "ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬"
}</pre>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <strong>ğŸ’¡ ë¬¸í•­ ë§¥ë½ ê³ ë ¤:</strong> ë¬¸í•­ì´ ë¬¸ì ì´í•´(literal comprehension)ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë©´ Simple Rephrasing ë§ìŒ.
                            ì¶”ë¡ (inference)ì„ í…ŒìŠ¤íŠ¸í•˜ë©´ Inferential Paraphrasing ë§ìŒ. ë¬¸í•­ì˜ ì˜ë„ë¥¼ íŒŒì•…í•˜ì—¬ ë¶„ë¥˜ ê²½ê³„ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤.
                        </div>
                    </div>
                </section>
            </div>
            <!-- End Question Pipeline Content -->
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>TFT Pipeline - Interactive Documentation (Passage & Question)</p>
            <p style="font-size: 0.9rem; margin-top: 0.5rem;">
                ë¬¸ì„œ ë²„ì „: 2.0 | ìµœì¢… ìˆ˜ì •ì¼: 2026-01-27
            </p>
        </footer>
    </main>

    <script>
        // ============================================
        // D3.js Flowchart Implementation
        // ============================================
        const flowchartData = {
            nodes: [
                { id: 'start', label: 'Start', subtitle: 'ì§€ë¬¸ ìƒì„± ìš”ì²­', type: 'start', x: 400, y: 50 },
                { id: 'step-1', label: '1. Generator', subtitle: 'LLM ì§€ë¬¸ ìƒì„±', type: 'process', x: 400, y: 150, section: 'step-1' },
                { id: 'step-2', label: '2. Initial Filter', subtitle: 'Â±1.9Ïƒ ê²€ì¦', type: 'filter', x: 400, y: 250, section: 'step-2' },
                { id: 'discard-1', label: 'Discard', subtitle: 'ì´ˆê¸° í•„í„° ì‹¤íŒ¨', type: 'fail', x: 150, y: 250 },
                { id: 'step-3', label: '3. Semantic Profile', subtitle: 'ì˜ë¯¸ í”„ë¡œí•„ ì¶”ì¶œ', type: 'process', x: 400, y: 350, section: 'step-3' },
                { id: 'step-4', label: '4. Topic Closeness', subtitle: 'ìœ ì‚¬ë„ 1~5', type: 'filter', x: 400, y: 450, section: 'step-4' },
                { id: 'discard-2', label: 'Discard', subtitle: 'ìœ ì‚¬ë„ ë¶€ì ì ˆ', type: 'fail', x: 150, y: 450 },
                { id: 'step-5', label: '5. Validation Chain', subtitle: '4ë‹¨ê³„ LLM ê²€ì¦', type: 'process', x: 400, y: 550, section: 'step-5' },
                { id: 'discard-3', label: 'Discard', subtitle: 'ê²€ì¦ ì‹¤íŒ¨', type: 'fail', x: 150, y: 550 },
                { id: 'step-6', label: '6. Text Analyzer', subtitle: '3ì§€í‘œ ë¶„ì„', type: 'process', x: 400, y: 650, section: 'step-6' },
                { id: 'decision', label: 'Case ë¶„ë¥˜', subtitle: 'A/B/C', type: 'decision', x: 400, y: 750 },
                { id: 'final-1', label: 'Final', subtitle: 'Case A: ëª¨ë‘ í†µê³¼', type: 'success', x: 650, y: 750 },
                { id: 'step-7', label: '7. Syntax Fix', subtitle: 'êµ¬ë¬¸ ìˆ˜ì •', type: 'revise', x: 400, y: 850, section: 'step-7' },
                { id: 'discard-4', label: 'Discard', subtitle: 'êµ¬ë¬¸ ìˆ˜ì • ì‹¤íŒ¨', type: 'fail', x: 150, y: 850 },
                { id: 'step-8', label: '8. Lexical Fix', subtitle: 'ì–´íœ˜ ìˆ˜ì •', type: 'revise', x: 400, y: 950, section: 'step-8' },
                { id: 'final-2', label: 'Final', subtitle: 'ì„±ê³µ', type: 'success', x: 650, y: 950 },
                { id: 'discard-5', label: 'Discard', subtitle: 'ì–´íœ˜ ìˆ˜ì • ì‹¤íŒ¨', type: 'fail', x: 150, y: 950 }
            ],
            links: [
                { source: 'start', target: 'step-1' },
                { source: 'step-1', target: 'step-2' },
                { source: 'step-2', target: 'step-3', label: 'Pass' },
                { source: 'step-2', target: 'discard-1', label: 'Fail' },
                { source: 'step-3', target: 'step-4' },
                { source: 'step-4', target: 'step-5', label: 'Label 3' },
                { source: 'step-4', target: 'discard-2', label: 'Label 1/5' },
                { source: 'step-5', target: 'step-6', label: 'Pass' },
                { source: 'step-5', target: 'discard-3', label: 'Fail' },
                { source: 'step-6', target: 'decision' },
                { source: 'decision', target: 'final-1', label: 'Case A' },
                { source: 'decision', target: 'step-7', label: 'Case C' },
                { source: 'decision', target: 'step-8', label: 'Case B' },
                { source: 'step-7', target: 'step-8', label: 'Pass' },
                { source: 'step-7', target: 'discard-4', label: 'Fail' },
                { source: 'step-8', target: 'final-2', label: 'Pass' },
                { source: 'step-8', target: 'discard-5', label: 'Fail' }
            ]
        };

        const svg = d3.select('#flowchart');
        const width = svg.node().getBoundingClientRect().width;
        const height = 600;

        svg.attr('width', width).attr('height', height);

        // Create zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.5, 2])
            .on('zoom', (event) => {
                g.attr('transform', event.transform);
            });

        svg.call(zoom);

        // Main group
        const g = svg.append('g');

        // Define arrow marker
        g.append('defs').append('marker')
            .attr('id', 'arrowhead')
            .attr('viewBox', '0 -5 10 10')
            .attr('refX', 8)
            .attr('refY', 0)
            .attr('markerWidth', 6)
            .attr('markerHeight', 6)
            .attr('orient', 'auto')
            .append('path')
            .attr('d', 'M0,-5L10,0L0,5')
            .attr('fill', '#94a3b8');

        // Color scheme
        const colors = {
            start: '#3b82f6',
            process: '#3b82f6',  // Generator uses blue (same as start)
            filter: '#10b981',
            decision: '#f59e0b',
            revise: '#f97316',
            success: '#22c55e',
            fail: '#ef4444'
        };

        // Draw links
        const links = g.selectAll('.link')
            .data(flowchartData.links)
            .enter()
            .append('g')
            .attr('class', 'link-group');

        links.append('path')
            .attr('class', 'link')
            .attr('d', d => {
                const source = flowchartData.nodes.find(n => n.id === d.source);
                const target = flowchartData.nodes.find(n => n.id === d.target);
                return `M${source.x},${source.y + 30} L${target.x},${target.y - 30}`;
            });

        links.append('text')
            .attr('class', 'link-label')
            .attr('x', d => {
                const source = flowchartData.nodes.find(n => n.id === d.source);
                const target = flowchartData.nodes.find(n => n.id === d.target);
                return (source.x + target.x) / 2 + 10;
            })
            .attr('y', d => {
                const source = flowchartData.nodes.find(n => n.id === d.source);
                const target = flowchartData.nodes.find(n => n.id === d.target);
                return (source.y + target.y) / 2;
            })
            .text(d => d.label || '');

        // Draw nodes
        const nodes = g.selectAll('.node')
            .data(flowchartData.nodes)
            .enter()
            .append('g')
            .attr('class', 'node')
            .attr('transform', d => `translate(${d.x},${d.y})`)
            .on('click', (event, d) => {
                if (d.section) {
                    const section = document.getElementById(d.section);
                    if (section) {
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });

                        // Highlight the clicked node
                        d3.selectAll('.node').classed('active', false);
                        d3.select(event.currentTarget).classed('active', true);
                    }
                }
            });

        nodes.append('rect')
            .attr('class', 'node-rect')
            .attr('x', -60)
            .attr('y', -25)
            .attr('width', 120)
            .attr('height', 50)
            .attr('fill', d => colors[d.type]);

        nodes.append('text')
            .attr('class', 'node-text')
            .attr('y', -5)
            .attr('fill', 'white')
            .text(d => d.label);

        nodes.append('text')
            .attr('class', 'node-subtitle')
            .attr('y', 10)
            .attr('fill', 'white')
            .text(d => d.subtitle);

        // Center the flowchart initially
        function centerFlowchart() {
            const bounds = g.node().getBBox();
            const fullWidth = bounds.width;
            const fullHeight = bounds.height;
            const midX = bounds.x + fullWidth / 2;
            const midY = bounds.y + fullHeight / 2;

            const scale = 0.8;
            const translate = [
                width / 2 - scale * midX,
                height / 2 - scale * midY
            ];

            svg.transition()
                .duration(750)
                .call(zoom.transform, d3.zoomIdentity
                    .translate(translate[0], translate[1])
                    .scale(scale));
        }

        function resetZoom() {
            svg.transition()
                .duration(750)
                .call(zoom.transform, d3.zoomIdentity);
        }

        // Auto-highlight nodes based on scroll position
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('.section[id^="step-"]');
            let currentSection = null;

            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 200 && rect.bottom >= 200) {
                    currentSection = section.id;
                }
            });

            if (currentSection) {
                d3.selectAll('.node').classed('active', false);
                d3.selectAll('.node').each(function (d) {
                    if (d.section === currentSection) {
                        d3.select(this).classed('active', true);
                    }
                });
            }
        });

        // Initialize centered
        setTimeout(centerFlowchart, 100);

        // ============================================
        // Question Pipeline Flowchart
        // ============================================
        const questionFlowchartData = {
            nodes: [
                { id: 'q-start', label: 'Start', subtitle: 'ì§€ë¬¸ ì…ë ¥', type: 'start', x: 400, y: 50 },
                { id: 'q-step-1', label: '1. Question Generator', subtitle: 'chatgpt-4o-latest', type: 'process', x: 400, y: 150, section: 'q-step-1' },
                { id: 'q-step-2', label: '2. Meta Labeling', subtitle: '3ê°€ì§€ ë¶„ì„', type: 'decision', x: 400, y: 250, section: 'q-step-2' },
                { id: 'q-step-2a', label: '2a. Stem Analysis', subtitle: 'ì§ˆë¬¸ êµ¬ì¡° ë¶„ë¥˜', type: 'process', x: 200, y: 350, section: 'q-step-2a' },
                { id: 'q-step-2b', label: '2b. Options Structure', subtitle: 'ì„ íƒì§€ êµ¬ì¡° ë¶„ë¥˜', type: 'process', x: 400, y: 350, section: 'q-step-2b' },
                { id: 'q-step-2c', label: '2c. Options Language', subtitle: 'ì–¸ì–´ ê´€ê³„ ë¶„ë¥˜', type: 'process', x: 600, y: 350, section: 'q-step-2c' },
                { id: 'q-final', label: 'Final', subtitle: 'ë©”íƒ€ë°ì´í„° ì™„ë£Œ', type: 'success', x: 400, y: 450 }
            ],
            links: [
                { source: 'q-start', target: 'q-step-1' },
                { source: 'q-step-1', target: 'q-step-2' },
                { source: 'q-step-2', target: 'q-step-2a' },
                { source: 'q-step-2', target: 'q-step-2b' },
                { source: 'q-step-2', target: 'q-step-2c' },
                { source: 'q-step-2a', target: 'q-final' },
                { source: 'q-step-2b', target: 'q-final' },
                { source: 'q-step-2c', target: 'q-final' }
            ]
        };

        const qSvg = d3.select('#question-flowchart');
        const qWidth = qSvg.node().parentElement?.getBoundingClientRect().width || 800;
        const qHeight = 600;

        qSvg.attr('width', qWidth).attr('height', qHeight);

        // Create zoom behavior for question flowchart
        const qZoom = d3.zoom()
            .scaleExtent([0.5, 2])
            .on('zoom', (event) => {
                qG.attr('transform', event.transform);
            });

        qSvg.call(qZoom);

        // Main group for question flowchart
        const qG = qSvg.append('g');

        // Define arrow marker for question flowchart
        qG.append('defs').append('marker')
            .attr('id', 'q-arrowhead')
            .attr('viewBox', '0 -5 10 10')
            .attr('refX', 8)
            .attr('refY', 0)
            .attr('markerWidth', 6)
            .attr('markerHeight', 6)
            .attr('orient', 'auto')
            .append('path')
            .attr('d', 'M0,-5L10,0L0,5')
            .attr('fill', '#94a3b8');

        // Color scheme for question pipeline (purple theme)
        const qColors = {
            start: '#7c3aed',
            process: '#7c3aed',
            decision: '#a78bfa',
            success: '#22c55e'
        };

        // Draw links for question flowchart
        const qLinks = qG.selectAll('.link')
            .data(questionFlowchartData.links)
            .enter()
            .append('g')
            .attr('class', 'link-group');

        qLinks.append('path')
            .attr('class', 'link')
            .attr('d', d => {
                const source = questionFlowchartData.nodes.find(n => n.id === d.source);
                const target = questionFlowchartData.nodes.find(n => n.id === d.target);
                return `M${source.x},${source.y + 30} L${target.x},${target.y - 30}`;
            })
            .attr('marker-end', 'url(#q-arrowhead)');

        // Draw nodes for question flowchart
        const qNodes = qG.selectAll('.node')
            .data(questionFlowchartData.nodes)
            .enter()
            .append('g')
            .attr('class', 'node')
            .attr('transform', d => `translate(${d.x},${d.y})`)
            .on('click', (event, d) => {
                if (d.section) {
                    const section = document.getElementById(d.section);
                    if (section) {
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });

                        // Highlight the clicked node
                        d3.selectAll('#question-flowchart .node').classed('active', false);
                        d3.select(event.currentTarget).classed('active', true);
                    }
                }
            });

        qNodes.append('rect')
            .attr('class', 'node-rect')
            .attr('x', -70)
            .attr('y', -25)
            .attr('width', 140)
            .attr('height', 50)
            .attr('fill', d => qColors[d.type]);

        qNodes.append('text')
            .attr('class', 'node-text')
            .attr('y', -5)
            .attr('fill', 'white')
            .text(d => d.label);

        qNodes.append('text')
            .attr('class', 'node-subtitle')
            .attr('y', 10)
            .attr('fill', 'white')
            .text(d => d.subtitle);

        // Center the question flowchart initially
        function centerQuestionFlowchart() {
            const bounds = qG.node().getBBox();
            const fullWidth = bounds.width;
            const fullHeight = bounds.height;
            const midX = bounds.x + fullWidth / 2;
            const midY = bounds.y + fullHeight / 2;

            const scale = 0.8;
            const translate = [
                qWidth / 2 - scale * midX,
                qHeight / 2 - scale * midY
            ];

            qSvg.transition()
                .duration(750)
                .call(qZoom.transform, d3.zoomIdentity
                    .translate(translate[0], translate[1])
                    .scale(scale));
        }

        function resetQuestionZoom() {
            qSvg.transition()
                .duration(750)
                .call(qZoom.transform, d3.zoomIdentity);
        }

        // Initialize question flowchart centered
        setTimeout(centerQuestionFlowchart, 100);

        // ============================================
        // Pipeline Tab Switching
        // ============================================
        function switchPipeline(pipeline) {
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.tab-btn[data-tab="${pipeline}"]`).classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${pipeline}-content`).classList.add('active');

            // Update sidebar navigation
            document.querySelectorAll('.nav-content').forEach(nav => {
                nav.style.display = 'none';
            });
            document.querySelector(`.nav-content[data-pipeline="${pipeline}"]`).style.display = 'block';

            // Update hero section
            if (pipeline === 'passage') {
                document.getElementById('heroTitle').innerHTML = 'ğŸ¯ TFT Passage Generation Pipeline';
                document.getElementById('heroDescription').innerHTML = 'êµìœ¡ìš© ì˜ì–´ ì§€ë¬¸ì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³ , í’ˆì§ˆì„ ê²€ì¦í•˜ë©°, í•„ìš”ì‹œ ìë™ìœ¼ë¡œ ìˆ˜ì •í•˜ëŠ” <br></br>MT Further Practice Pipeline ê°€ì´ë“œì…ë‹ˆë‹¤.';
                document.getElementById('heroStats').innerHTML = `
                    <div class="stat-card">
                        <span class="stat-number">8</span>
                        <span class="stat-label">Processing Steps</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">3</span>
                        <span class="stat-label">Key Metrics</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">4</span>
                        <span class="stat-label">LLM Validations</span>
                    </div>
                `;
            } else if (pipeline === 'question') {
                document.getElementById('heroTitle').innerHTML = 'â“ TFT Question Generation Pipeline';
                document.getElementById('heroDescription').innerHTML = 'ì£¼ì–´ì§„ ì§€ë¬¸ì„ ê¸°ë°˜ìœ¼ë¡œ ë…í•´ ë¬¸ì œë¥¼ ìƒì„±í•˜ê³ , ë¬¸í•­ì˜ êµ¬ì¡°ì Â·ì–¸ì–´ì  íŠ¹ì„±ì„ ë©”íƒ€ ë¶„ì„í•˜ëŠ” <br>Question Pipeline ê°€ì´ë“œì…ë‹ˆë‹¤.';
                document.getElementById('heroStats').innerHTML = `
                    <div class="stat-card">
                        <span class="stat-number">2</span>
                        <span class="stat-label">Main Steps</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">3</span>
                        <span class="stat-label">Meta Analyses</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">5</span>
                        <span class="stat-label">Classification Types</span>
                    </div>
                `;
                // Redraw question flowchart when switching to question tab
                setTimeout(() => {
                    centerQuestionFlowchart();
                }, 100);
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ============================================
        // Navigation & Sidebar
        // ============================================
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('show');
        }

        function setActive(element) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');

            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('show');
            }
        }

        // Auto-highlight nav items on scroll
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('.section');
            const navItems = document.querySelectorAll('.nav-item');

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (window.pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === `#${current}`) {
                    item.classList.add('active');
                }
            });
        });

        // ============================================
        // Dark Mode Toggle
        // ============================================
        function toggleDarkMode() {
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');

            body.classList.toggle('dark-mode');

            if (body.classList.contains('dark-mode')) {
                themeIcon.textContent = 'â˜€ï¸';
                themeText.textContent = 'Light';
                localStorage.setItem('theme', 'dark');
            } else {
                themeIcon.textContent = 'ğŸŒ™';
                themeText.textContent = 'Dark';
                localStorage.setItem('theme', 'light');
            }
        }

        // Load saved theme
        window.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                document.getElementById('themeIcon').textContent = 'â˜€ï¸';
                document.getElementById('themeText').textContent = 'Light';
            }
        });

        // ============================================
        // Search Functionality
        // ============================================
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            if (query.length < 2) {
                clearSearchHighlights();
                return;
            }

            const sections = document.querySelectorAll('.section-content');
            sections.forEach(section => {
                const text = section.textContent.toLowerCase();
                if (text.includes(query)) {
                    section.style.background = 'rgba(37, 99, 235, 0.1)';
                } else {
                    section.style.background = '';
                }
            });
        });

        function clearSearchHighlights() {
            document.querySelectorAll('.section-content').forEach(section => {
                section.style.background = '';
            });
        }

        // ============================================
        // Code Copy Functionality
        // ============================================
        function copyCode(button) {
            const codeBlock = button.closest('.code-block');
            const code = codeBlock.querySelector('pre').textContent;

            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = 'âœ… Copied!';
                button.style.background = 'var(--success)';
                button.style.color = 'white';

                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.style.color = '';
                }, 2000);
            });
        }

        // ============================================
        // Smooth Scroll
        // ============================================
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ============================================
        // Keyboard Shortcuts
        // ============================================
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }

            if (e.key === 'Escape') {
                document.getElementById('searchInput').value = '';
                clearSearchHighlights();
            }
        });

        console.log('%cğŸ“š TFT Pipeline Interactive Guide', 'font-size: 20px; font-weight: bold; color: #2563eb;');
        console.log('%câœ… Passage & Question Pipeline Integration Complete', 'font-size: 14px; color: #10b981;');
        console.log('%c- Tab system for pipeline switching', 'font-size: 12px; color: #6c757d;');
        console.log('%c- Dual flowcharts with D3.js', 'font-size: 12px; color: #6c757d;');
        console.log('%c- Dynamic sidebar navigation', 'font-size: 12px; color: #6c757d;');
        console.log('%c- Interactive nodes with click-to-scroll', 'font-size: 12px; color: #6c757d;');
        console.log('%c- Zoom and pan support for both pipelines', 'font-size: 12px; color: #6c757d;');
    </script>
</body>

</html>